@tailwind base;
@tailwind components;
@tailwind utilities;

/* ============================================
   ORIA Design System - Enterprise Grade PWA
   ============================================ */

/* Base Reset & PWA Optimizations */
@layer base {
    *,
    *::before,
    *::after {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        -webkit-tap-highlight-color: transparent;
    }

    html {
        font-size: 16px;
        -webkit-text-size-adjust: 100%;
        -moz-text-size-adjust: 100%;
        text-size-adjust: 100%;
        scroll-behavior: smooth;
    }

    body {
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', sans-serif;
        background: #000000;
        color: #ffffff;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        text-rendering: optimizeLegibility;
        overflow-x: hidden;
        overscroll-behavior-y: contain;
        min-height: 100vh;
        min-height: 100dvh;
        /* PWA safe area support */
        padding-top: env(safe-area-inset-top);
        padding-bottom: env(safe-area-inset-bottom);
        padding-left: env(safe-area-inset-left);
        padding-right: env(safe-area-inset-right);
    }

    #root {
        min-height: 100vh;
        min-height: 100dvh;
        width: 100%;
        display: flex;
        flex-direction: column;
    }

    /* Selection */
    ::selection {
        background: rgba(139, 92, 246, 0.3);
        color: #ffffff;
    }

    /* Focus visible for accessibility */
    :focus-visible {
        outline: 2px solid #8B5CF6;
        outline-offset: 2px;
    }

    /* Remove default focus outline */
    :focus:not(:focus-visible) {
        outline: none;
    }
}

/* ============================================
   Scrollbar Styling
   ============================================ */
::-webkit-scrollbar {
    width: 6px;
    height: 6px;
}

::-webkit-scrollbar-track {
    background: transparent;
}

::-webkit-scrollbar-thumb {
    background: #27272A;
    border-radius: 3px;
}

::-webkit-scrollbar-thumb:hover {
    background: #3F3F46;
}

/* Hide scrollbar for mobile PWA feel */
@media (max-width: 768px) {
    ::-webkit-scrollbar {
        display: none;
    }

    * {
        scrollbar-width: none;
        -ms-overflow-style: none;
    }
}

/* ============================================
   Component Layer - Reusable UI Patterns
   ============================================ */
@layer components {
    /* Button Base */
    .btn {
        @apply inline-flex items-center justify-center gap-2;
        @apply font-semibold text-body-sm;
        @apply rounded-xl px-6 py-3.5;
        @apply transition-all duration-200 ease-smooth;
        @apply disabled:opacity-50 disabled:cursor-not-allowed;
        @apply active:scale-[0.98];
    }

    .btn-primary {
        @apply btn;
        @apply bg-gradient-to-r from-oria-gold to-oria-gold-dark;
        @apply text-black;
        @apply shadow-button shadow-oria-gold/20;
        @apply hover:shadow-glow-gold hover:brightness-110;
    }

    .btn-secondary {
        @apply btn;
        @apply bg-gradient-to-r from-oria-purple to-oria-purple-dark;
        @apply text-white;
        @apply shadow-button shadow-oria-purple/20;
        @apply hover:shadow-glow-purple hover:brightness-110;
    }

    .btn-outline {
        @apply btn;
        @apply bg-transparent border border-stroke-primary;
        @apply text-content-primary;
        @apply hover:bg-surface-elevated hover:border-stroke-secondary;
    }

    .btn-ghost {
        @apply btn;
        @apply bg-transparent;
        @apply text-content-secondary;
        @apply hover:bg-surface-elevated hover:text-content-primary;
    }

    /* Input Base */
    .input {
        @apply w-full;
        @apply bg-surface-tertiary border border-stroke-primary;
        @apply rounded-xl px-4 py-4;
        @apply text-body text-content-primary placeholder-content-muted;
        @apply transition-all duration-200 ease-smooth;
        @apply focus:border-oria-purple focus:ring-2 focus:ring-oria-purple/20;
        @apply outline-none;
        appearance: none;
        -webkit-appearance: none;
    }

    .input-error {
        @apply input;
        @apply border-status-error focus:border-status-error focus:ring-status-error/20;
    }

    /* Card Styles */
    .card {
        @apply bg-surface-secondary rounded-3xl;
        @apply border border-stroke-subtle;
        @apply shadow-card;
        @apply overflow-hidden;
    }

    .card-elevated {
        @apply card;
        @apply bg-surface-elevated;
        @apply hover:shadow-card-hover hover:border-stroke-primary;
        @apply transition-all duration-300 ease-smooth;
    }

    /* Glass Effect */
    .glass {
        @apply bg-surface-primary/80;
        @apply backdrop-blur-xl;
        @apply border border-stroke-subtle/50;
    }

    /* Badge Styles */
    .badge {
        @apply inline-flex items-center gap-1;
        @apply px-2.5 py-1;
        @apply rounded-full;
        @apply text-overline uppercase;
    }

    .badge-gold {
        @apply badge;
        @apply bg-oria-gold/10 text-oria-gold;
        @apply border border-oria-gold/20;
    }

    .badge-purple {
        @apply badge;
        @apply bg-oria-purple/10 text-oria-purple;
        @apply border border-oria-purple/20;
    }

    .badge-success {
        @apply badge;
        @apply bg-status-success/10 text-status-success;
        @apply border border-status-success/20;
    }

    /* Status Indicators */
    .status-dot {
        @apply w-2 h-2 rounded-full;
    }

    .status-dot-success {
        @apply status-dot bg-status-success;
        @apply animate-pulse-soft;
    }

    .status-dot-warning {
        @apply status-dot bg-status-warning;
    }

    .status-dot-error {
        @apply status-dot bg-status-error;
    }

    /* Dividers */
    .divider {
        @apply h-px w-full;
        @apply bg-gradient-to-r from-transparent via-stroke-primary to-transparent;
    }

    /* Section Container */
    .section {
        @apply px-5 py-6;
    }

    /* Safe area containers for PWA */
    .safe-top {
        padding-top: max(env(safe-area-inset-top), 12px);
    }

    .safe-bottom {
        padding-bottom: max(env(safe-area-inset-bottom), 24px);
    }
}

/* ============================================
   Utility Layer - Custom Utilities
   ============================================ */
@layer utilities {
    /* Text Gradient */
    .text-gradient-purple {
        @apply bg-clip-text text-transparent;
        @apply bg-gradient-to-r from-oria-purple to-oria-blue;
    }

    .text-gradient-gold {
        @apply bg-clip-text text-transparent;
        @apply bg-gradient-to-r from-oria-gold to-oria-gold-dark;
    }

    /* Hide scrollbar utility */
    .hide-scrollbar {
        -ms-overflow-style: none;
        scrollbar-width: none;
    }

    .hide-scrollbar::-webkit-scrollbar {
        display: none;
    }

    /* Smooth scroll container */
    .scroll-smooth {
        scroll-behavior: smooth;
        -webkit-overflow-scrolling: touch;
    }

    /* Touch manipulation for better PWA feel */
    .touch-action-pan {
        touch-action: pan-x pan-y;
    }

    /* Prevent text selection on interactive elements */
    .select-none-touch {
        -webkit-user-select: none;
        user-select: none;
        -webkit-touch-callout: none;
    }

    /* Hardware acceleration */
    .gpu {
        transform: translateZ(0);
        backface-visibility: hidden;
        perspective: 1000px;
    }

    /* Skeleton loading */
    .skeleton {
        @apply animate-shimmer;
        background: linear-gradient(
            90deg,
            #1a1a1a 0%,
            #2a2a2a 50%,
            #1a1a1a 100%
        );
        background-size: 200% 100%;
    }

    /* Noise overlay */
    .noise-overlay {
        position: relative;
    }

    .noise-overlay::after {
        content: '';
        position: absolute;
        inset: 0;
        background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
        opacity: 0.03;
        pointer-events: none;
        mix-blend-mode: overlay;
    }

    /* Clamp text */
    .line-clamp-1 {
        display: -webkit-box;
        -webkit-line-clamp: 1;
        -webkit-box-orient: vertical;
        overflow: hidden;
    }

    .line-clamp-2 {
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
    }

    /* Aspect ratios */
    .aspect-album {
        aspect-ratio: 1 / 1;
    }

    .aspect-card {
        aspect-ratio: 3 / 4;
    }

    /* Gradient borders */
    .border-gradient-purple {
        border: 1px solid transparent;
        background: linear-gradient(#000, #000) padding-box,
                    linear-gradient(135deg, #8B5CF6, #3B82F6) border-box;
    }

    .border-gradient-gold {
        border: 1px solid transparent;
        background: linear-gradient(#000, #000) padding-box,
                    linear-gradient(135deg, #F59E0B, #D97706) border-box;
    }
}

/* ============================================
   Animation Keyframes
   ============================================ */
@keyframes fadeIn {
    from {
        opacity: 0;
    }
    to {
        opacity: 1;
    }
}

@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes fadeInDown {
    from {
        opacity: 0;
        transform: translateY(-20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes scaleIn {
    from {
        opacity: 0;
        transform: scale(0.95);
    }
    to {
        opacity: 1;
        transform: scale(1);
    }
}

@keyframes slideUp {
    from {
        transform: translateY(100%);
    }
    to {
        transform: translateY(0);
    }
}

@keyframes slideDown {
    from {
        transform: translateY(-100%);
    }
    to {
        transform: translateY(0);
    }
}

@keyframes shimmer {
    0% {
        background-position: -200% 0;
    }
    100% {
        background-position: 200% 0;
    }
}

@keyframes pulseSoft {
    0%, 100% {
        opacity: 1;
    }
    50% {
        opacity: 0.5;
    }
}

@keyframes spin {
    from {
        transform: rotate(0deg);
    }
    to {
        transform: rotate(360deg);
    }
}

@keyframes bounceSubtle {
    0%, 100% {
        transform: translateY(0);
    }
    50% {
        transform: translateY(-4px);
    }
}

@keyframes pulse-ring {
    0% {
        transform: scale(0.8);
        opacity: 1;
    }
    100% {
        transform: scale(2);
        opacity: 0;
    }
}

/* ============================================
   PWA-Specific Styles
   ============================================ */

/* Standalone mode detection */
@media (display-mode: standalone) {
    body {
        /* Extra padding for notch devices */
        padding-top: env(safe-area-inset-top);
    }
}

/* iOS-specific fixes */
@supports (-webkit-touch-callout: none) {
    body {
        /* Fix iOS bounce scroll */
        position: fixed;
        width: 100%;
        height: 100%;
        overflow: hidden;
    }

    #root {
        overflow-y: auto;
        -webkit-overflow-scrolling: touch;
    }
}

/* Prevent pull-to-refresh on mobile */
html {
    overscroll-behavior: none;
}

/* Disable text selection on UI elements */
button,
a,
nav {
    -webkit-user-select: none;
    user-select: none;
}

/* Touch feedback */
button:active,
a:active,
[role="button"]:active {
    opacity: 0.8;
}

/* ============================================
   Responsive Typography Scale
   ============================================ */
@media (min-width: 640px) {
    html {
        font-size: 17px;
    }
}

@media (min-width: 1024px) {
    html {
        font-size: 18px;
    }
}

/* ============================================
   Print Styles (disabled for PWA)
   ============================================ */
@media print {
    body {
        display: none;
    }
}
